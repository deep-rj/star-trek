# convert the admitted into percentage (turn into function)
timesubset <- HealthData[,'AdmittedTime']
timesubset <- strsplit(timesubset, ":")
part1 <- unlist(lapply(timesubset, function(x) x[1])) # extract before colon
part2 <- unlist(lapply(timesubset, function(x) x[2])) # extract after colon
part1 <- as.numeric(part1) # convert to numeric for calculation
part2 <- as.numeric(part2) # convert to numeric for calculation
admitted <- ((60*part1) + part2) / minInDay # perform calculation
HealthData$Admitted <- admitted # put time in back into data frame
HealthData$visittime <- HealthData$timeout - HealthData$timein # calculate visit time
HealthData$visittimemin <- HealthData$visittime * minInDay # visit time in minutes
# remove some redundant columns
HealthData <- subset(HealthData, select = -c(CheckIn, CheckOut, AdmittedTime))
# add data about transferring to a hospital
HealthData$T2H <- 0
HealthData$T2H[!is.na(HealthData$Transported.to.Hospital)] <- "1"
# create variable that contains 1 for transfer, 0 otherwise
HealthData$T2T <- 0
HealthData$T2T[!is.na(HealthData$Transferred)] <- "1"
# rename Hospital and Transferred
names(HealthData)[names(HealthData) == 'Transferred'] <- 'Transfer Name'
names(HealthData)[names(HealthData) == 'Transported.to.Hospital'] <- 'Hospital Name'
# convert Transfer Name to string for manipulation
HealthData$`Transfer Name` <- as.character(HealthData$`Transfer Name`)
HealthData$`Transfer Name`[HealthData$`Transfer Name` == 'Medical Balbo - Gen Care'] <- 'Medical Balbo Tent'
HealthData$`Transfer Name`[HealthData$`Transfer Name` == 'Medical Balbo - ICU'] <- 'Medical Balbo Tent'
HealthData$`Transfer Name`[HealthData$`Transfer Name` == 'Medical Laflin'] <- 'Medical Laflin Tent'
HealthData$`Transfer Name`[HealthData$`Transfer Name` == ''] <- NA
# convert Transfer name back to factor
HealthData$`Transfer Name` <- as.factor(HealthData$`Transfer Name`)
# clean up Hospital Names
HealthData$`Hospital Name`[HealthData$`Hospital Name` == ''] <- NA
# convert Tent to string for manipulation
HealthData$Tent <- as.character(HealthData$Tent)
# make tent names consistent
HealthData$Tent[HealthData$Tent == "401 - RTS 1"] <- "RTS # 1"
HealthData$Tent[HealthData$Tent == "402 - RTS 2"] <- "RTS # 2"
HealthData$Tent[HealthData$Tent == "404 - RTS 4"] <- "RTS # 4"
HealthData$Tent[HealthData$Tent == "405 - RTS 5"] <- "RTS # 5"
HealthData$Tent[HealthData$Tent == "406 - RTS 6"] <- "RTS # 6"
HealthData$Tent[HealthData$Tent == "407 - RTS 7"] <- "RTS # 7"
HealthData$Tent[HealthData$Tent == "408 - RTS 8"] <- "RTS # 8"
HealthData$Tent[HealthData$Tent == "409 - RTS 9"] <- "RTS # 9"
HealthData$Tent[HealthData$Tent == "416- RTS 16"] <- "RTS # 16"
HealthData$Tent[HealthData$Tent == "417 - RTS 17"] <- "RTS # 17"
HealthData$Tent[HealthData$Tent == "419 - RTS 19"] <- "RTS # 19"
##
HealthData$Tent[HealthData$Tent == "422 - ELITE 2"] <- "ELITE # 2"
HealthData$Tent[HealthData$Tent == "423 - ELITE ADA"] <- "ELITE ADA"
##
HealthData$Tent[HealthData$Tent == "431 - HUB 1"] <- "HUB # 1"
HealthData$Tent[HealthData$Tent == "432 - HUB 2"] <- "HUB # 2"
HealthData$Tent[HealthData$Tent == "433 - HUB 3"] <- "HUB # 3"
HealthData$Tent[HealthData$Tent == "434 - HUB 4"] <- "HUB # 4"
HealthData$Tent[HealthData$Tent == "435 - HUB 5"] <- "HUB # 5"
HealthData$Tent[HealthData$Tent == "436 - HUB 6"] <- "HUB # 6"
HealthData$Tent[HealthData$Tent == "437 - HUB 7"] <- "HUB # 7"
##
HealthData$Tent[HealthData$Tent == "Aid Station 1"] <- "Aid Station # 1"
HealthData$Tent[HealthData$Tent == "Aid Station 2"] <- "Aid Station # 2"
HealthData$Tent[HealthData$Tent == "Aid Station 3"] <- "Aid Station # 3"
HealthData$Tent[HealthData$Tent == "Aid Station 4"] <- "Aid Station # 4"
HealthData$Tent[HealthData$Tent == "Aid Station 5"] <- "Aid Station # 5"
HealthData$Tent[HealthData$Tent == "Aid Station 6"] <- "Aid Station # 6"
HealthData$Tent[HealthData$Tent == "Aid Station 7"] <- "Aid Station # 7"
HealthData$Tent[HealthData$Tent == "Aid Station 8"] <- "Aid Station # 8"
HealthData$Tent[HealthData$Tent == "Aid Station 9"] <- "Aid Station # 9"
HealthData$Tent[HealthData$Tent == "Aid Station 10"] <- "Aid Station # 10"
HealthData$Tent[HealthData$Tent == "Aid Station 11"] <- "Aid Station # 11"
HealthData$Tent[HealthData$Tent == "Aid Station 12"] <- "Aid Station # 12"
HealthData$Tent[HealthData$Tent == "Aid Station 13"] <- "Aid Station # 13"
HealthData$Tent[HealthData$Tent == "Aid Station 14"] <- "Aid Station # 14"
HealthData$Tent[HealthData$Tent == "Aid Station 15"] <- "Aid Station # 15"
HealthData$Tent[HealthData$Tent == "Aid Station 16"] <- "Aid Station # 16"
HealthData$Tent[HealthData$Tent == "Aid Station 17"] <- "Aid Station # 17"
HealthData$Tent[HealthData$Tent == "Aid Station 18"] <- "Aid Station # 18"
HealthData$Tent[HealthData$Tent == "Aid Station 19"] <- "Aid Station # 19"
HealthData$Tent[HealthData$Tent == "Aid Station 20"] <- "Aid Station # 20"
## fixing ems
ems_indices <- grep("EMS ", HealthData$Tent)
HealthData$Tent[ems_indices] <- gsub("EMS ", "EMS # ", HealthData$Tent[ems_indices])
##
HealthData$Tent[HealthData$Tent == "Medical Laflin"] <- "Medical - Laflin Tent"
## Indiana aid station is aid station #21
HealthData$Tent[HealthData$Tent == "Medical Indiana"] <- 'Aid Station # 21'
##
HealthData$Tent[HealthData$Tent == "Medical Jackson Tent"] <- "Medical - Jackson Tent"
##
HealthData$Tent[HealthData$Tent == "Medical Balbo - Gen Care"] <- "Medical - Balbo Tent"
HealthData$Tent[HealthData$Tent == "Medical Balbo - ICU"] <- "Medical - Balbo Tent"
HealthData$Tent[HealthData$Tent == "Medical Balbo - Urgent Care"] <- "Medical - Balbo Tent"
HealthData$Tent[HealthData$Tent == "Medical Balbo Podiatry Tent"] <- "Medical - Balbo Tent"
# convert back to factor
HealthData$Tent <- as.factor(HealthData$Tent)
# convert section to string for maniuplation and convert tent just in case
HealthData$Section <- as.character(HealthData$Section)
HealthData$Tent <- as.character(HealthData$Tent)
# POD-A, POD-B, POD-C, and POD-D in Tent = Medical - Balbo Tent need to be in the Podiatry Tent
HealthData$Tent[HealthData$Tent == 'Medical - Balbo Tent' & HealthData$Section == 'POD-A'] <- "Medical - Podiatry Tent"
HealthData$Tent[HealthData$Tent == 'Medical - Balbo Tent' & HealthData$Section == 'POD-B'] <- "Medical - Podiatry Tent"
HealthData$Tent[HealthData$Tent == 'Medical - Balbo Tent' & HealthData$Section == 'POD-C'] <- "Medical - Podiatry Tent"
HealthData$Tent[HealthData$Tent == 'Medical - Balbo Tent' & HealthData$Section == 'POD-D'] <- "Medical - Podiatry Tent"
#
HealthData$Section[HealthData$Section == 'Gen Care A - Hawks'] <- 'GC - A'
HealthData$Section[HealthData$Section == 'Gen Care B - Fire'] <- 'GC - B'
HealthData$Section[HealthData$Section == 'Gen Care C - Cubs'] <- 'GC - C'
HealthData$Section[HealthData$Section == 'Gen Care D - Sox'] <- 'GC - D'
HealthData$Section[HealthData$Section == 'Gen Care E - Bulls'] <- 'GC - E'
HealthData$Section[HealthData$Section == 'Gen Care F - Bears'] <- 'GC - F'
#
HealthData$Section[HealthData$Section == 'ICU-A'] <- 'ICU'
HealthData$Section[HealthData$Section == 'ICU-B'] <- 'ICU'
# putting spaces around the - in pod
pod_indices <- grep("POD-", HealthData$Section)
HealthData$Section[pod_indices] <- gsub("POD-", "POD - ", HealthData$Section[pod_indices])
# putting spaces between the - in GC-
gc_indices <- grep("GC-", HealthData$Section)
HealthData$Section[gc_indices] <- gsub("GC-", "GC - ", HealthData$Section[gc_indices])
# fixing EMS in sections
ems_sections_indices <- grep("EMS ", HealthData$Section)
HealthData$Section[ems_sections_indices] <- gsub("EMS ", "EMS # ", HealthData$Section[ems_sections_indices])
# convert section and tent back to factor
HealthData$Section <- as.factor(HealthData$Section)
HealthData$Tent <- as.factor(HealthData$Tent)
# convert to string for data manipulation
HealthData$ChiefComplaints <- as.character(HealthData$ChiefComplaints)
# strip leading and trailing white space, make all lower case
trim <- function (x) gsub("^\\s+|\\s+$", "", x)
HealthData$ChiefComplaints <- trim(HealthData$ChiefComplaints)
HealthData$ChiefComplaints <- tolower(HealthData$ChiefComplaints)
# remove semicolon to get rid of trailing semicolon, then replace "  " with "; "
HealthData$ChiefComplaints <- gsub(";", "", HealthData$ChiefComplaints)
HealthData$ChiefComplaints <- gsub("  ", "; ", HealthData$ChiefComplaints)
# Recode nulls to NA
missing_complaints <- which(HealthData$ChiefComplaints == '')
HealthData$ChiefComplaints[missing_complaints] <- NA
# order text entries in alphabetical order (so we end up with the same categories)
order_string_splits <- function(dataframe_column, delimiter) {
store <- matrix(0,0,1)
split <- strsplit(dataframe_column, delimiter)
for (i in split) {
sorted <- sort(i)
concatenated <- paste(sorted, collapse='; ')
store <- rbind(store, concatenated)
}
return(store)
}
reordered_chief_complaints <- order_string_splits(HealthData$ChiefComplaints, '; ')
HealthData$ChiefComplaints <- as.factor(reordered_chief_complaints)
length(unique(HealthData$ChiefComplaints)) # 129 unique combinations after ordering
# convert Diagnosis to string for manipulation and make lower case
HealthData$Diagnosis <- as.character(HealthData$Diagnosis)
HealthData$Diagnosis <- tolower(HealthData$Diagnosis)
# do some reformating
HealthData$Diagnosis <- gsub('; ', '', HealthData$Diagnosis)
HealthData$Diagnosis <- gsub(' / ', '/', HealthData$Diagnosis)
HealthData$Diagnosis <- gsub(' ', '; ', HealthData$Diagnosis)
HealthData$Diagnosis <- gsub('muscle; cramps', 'muscle cramps', HealthData$Diagnosis)
HealthData$Diagnosis <- gsub('exercise; assoc.; collapse', 'exercise assoc. collapse', HealthData$Diagnosis)
HealthData$Diagnosis <- gsub('heel; pain', 'heel pain', HealthData$Diagnosis)
HealthData$Diagnosis <- gsub('shin; splints', 'shin splints', HealthData$Diagnosis)
# now let's reorder the entries and get the unique combinations
reordered_diagnosis <- order_string_splits(HealthData$Diagnosis, '; ')
# Recode nulls to NA
missing_diagnoses <- which(HealthData$Diagnosis == '')
HealthData$Diagnosis[missing_diagnoses] <- NA
HealthData$Diagnosis <- as.factor(reordered_diagnosis)
length(unique(HealthData$Diagnosis)) # 57 unique combinations after ordering
# convert AdmittedNote to string for manipulation and make lower case
HealthData$AdmittedNote <- as.character(HealthData$AdmittedNote)
HealthData$AdmittedNote <- tolower(HealthData$AdmittedNote)
HealthData$AdmittedNote <- trimws(HealthData$AdmittedNote, which = 'both')
HealthData$AdmittedNote <- gsub(' +', ' ', HealthData$AdmittedNote)
HealthData$AdmittedNote <- gsub('treatment: ', '', HealthData$AdmittedNote)
HealthData$AdmittedNote <- gsub(', ', '; ', HealthData$AdmittedNote)
HealthData$AdmittedNote <- gsub('tylenolg', 'tylenol', HealthData$AdmittedNote)
HealthData$AdmittedNote <- gsub(' and ', '; ', HealthData$AdmittedNote)
HealthData$AdmittedNote <- gsub(' & ', '; ', HealthData$AdmittedNote)
# reorder and get unique combinations
reordered_admitted_note <- order_string_splits(HealthData$AdmittedNote, '; ')
HealthData$AdmittedNote <- as.factor(reordered_admitted_note)
length(unique(HealthData$AdmittedNote)) # 661 unique combinations after ordering
# replace all 0 temperature readings with NA
HealthData$Temperature[which(HealthData$Temperature == 0)] <- NA
# reading of 41.3 for one runner is probably celsius; converting to 106.34 fahrenheit
HealthData$Temperature <- as.numeric(as.character(HealthData$Temperature))
HealthData$Temperature[which(HealthData$Temperature == 41.3)] <- 106.34
# investigate sodium levels - set 0 to NA
HealthData$Sodium.Level
# add year to the 2016 healthdata
HealthData$Year <- 2016
# update names on 2012-2015 data; remove X (index) column
names(HealthDataRecoded2012to2015)[names(HealthDataRecoded2012to2015) == 'gender'] <- 'Gender'
names(HealthDataRecoded2012to2015)[names(HealthDataRecoded2012to2015) == 'age'] <- 'Age'
names(HealthDataRecoded2012to2015)[names(HealthDataRecoded2012to2015) == 'year'] <- 'Year'
names(HealthDataRecoded2012to2015)[names(HealthDataRecoded2012to2015) == 'tempAvg'] <- 'Temperature'
names(HealthDataRecoded2012to2015)[names(HealthDataRecoded2012to2015) == 'Transfer.Name'] <- 'Transfer Name'
names(HealthDataRecoded2012to2015)[names(HealthDataRecoded2012to2015) == 'Hospital.Name'] <- 'Hospital Name'
HealthDataRecoded2012to2015$X <- NULL
# add columns that were collected in 2012-2015, but not in 2016
column_names <- setdiff(names(HealthDataRecoded2012to2015), names(HealthData))
HealthData[,column_names] <- NA
### Cleanup for old data
# Rename NA values to NOID
HealthDataRecoded2012to2015$BIB_ID <- as.character(HealthDataRecoded2012to2015$BIB_ID)
HealthDataRecoded2012to2015$BIB_ID[is.na(HealthDataRecoded2012to2015$BIB_ID)] <- 'NOID'
HealthDataRecoded2012to2015$BIB_ID <- as.factor(HealthDataRecoded2012to2015$BIB_ID)
# Aggregate ICU values
HealthDataRecoded2012to2015$Section[HealthDataRecoded2012to2015$Section == 'ICU-A'] <- 'ICU'
HealthDataRecoded2012to2015$Section[HealthDataRecoded2012to2015$Section == 'ICU-B'] <- 'ICU'
# Putting spaces around the '-' in pod
pod_indices_old <- grep("POD-", HealthDataRecoded2012to2015$Section)
HealthDataRecoded2012to2015$Section[pod_indices_old] <- gsub("POD-", "POD - ", HealthDataRecoded2012to2015$Section[pod_indices_old])
# Make Check out status consistent across years
cos_indices_old <- grep("Check out", HealthDataRecoded2012to2015$CheckOutStatus)
HealthDataRecoded2012to2015$CheckOutStatus[cos_indices_old] <- 'Check Out'
# Making diagnosis and chief complaints consistent
other_2015_diag_indices <- which(HealthDataRecoded2012to2015$Diagnosis == 'other ' & HealthDataRecoded2012to2015$Year == 2015)
HealthDataRecoded2012to2015$Diagnosis[other_2015_diag_indices] <- 'other'
other_2015_cc_indices <- which(HealthDataRecoded2012to2015$ChiefComplaints == 'other ' & HealthDataRecoded2012to2015$Year == 2015)
HealthDataRecoded2012to2015$ChiefComplaints[other_2015_cc_indices] <- 'other'
# Handling street addresses for 2016 data
street_indices <- which(HealthDataRecoded2012to2015$Year == 2015 & !is.na(HealthDataRecoded2012to2015$Street.Location.Description))
aid_station_street_addresses <- unique(HealthDataRecoded2012to2015[street_indices, c("Tent", "Street.Location.Description")])
aid_station_street_addresses$Street.Location.Description <- as.character(aid_station_street_addresses$Street.Location.Description)
aid_station_street_addresses$Tent <- as.character(aid_station_street_addresses$Tent)
HealthData$Tent <- as.character(HealthData$Tent)
HealthData$Street.Location.Description <- as.character(HealthData$Street.Location.Description)
HealthData <- merge(HealthData, aid_station_street_addresses, all.x = TRUE, by = 'Tent')
HealthData$Street.Location.Description.x <- HealthData$Street.Location.Description.y
HealthData$Street.Location.Description.y <- NULL
names(HealthData)[names(HealthData)=="Street.Location.Description.x"] <- "Street.Location.Description"
HealthData$Tent <- as.factor(HealthData$Tent)
HealthData$Street.Location.Description <- as.factor(HealthData$Street.Location.Description)
# integrating 2016 data to new dataframe
HealthDataRecoded2012to2016 <- rbind(HealthDataRecoded2012to2015, HealthData)
raw_2016 <- read.csv("/Volumes/marathon/NSF_Marathon_DataAnalytics/Craigs_XSpace/2016 Combined (no fast track).csv", header = TRUE)
HealthDataRecoded2012to2015 <- read.csv("/Volumes/marathon/NSF_Marathon_DataAnalytics/Craigs_XSpace/HealthDataRecoded2012to2015.csv")
HealthData <- raw_2016
raw_2016 <- read.csv("Z:\\NSF_Marathon_DataAnalytics\\Craigs_XSpace\\2016 Combined (no fast track).csv", header = TRUE)
HealthData <- raw_2016
# summary of the data frame
str(HealthData)
summary(HealthData)
# replace all missing data with NA
HealthData <- apply(HealthData, 2, function(x) gsub("^$|^ $", NA, x))
# re-convert HealthData to data frame
HealthData <- data.frame(HealthData)
# find the percentage of missing data prior to cleansing/aggregation
missingValuePercentage <- function(dataset) {
percentage <- sum(is.na(dataset))/(nrow(dataset)*ncol(dataset)) # this only works for a data frame, not vector
return(percentage)
}
missingValuePercentage(HealthData)
# rename BIB to BIB_ID
names(HealthData)[names(HealthData) == 'BIB'] <- 'BIB_ID'
# get the number of unique bib_id's
length(unique(HealthData$BIB_ID))
# converting levels from M / F to 1 / 0
levels(HealthData$Gender)[levels(HealthData$Gender) == 'M'] <- 1
levels(HealthData$Gender)[levels(HealthData$Gender) == 'F'] <- 0
# change check in and admitted times from factors to strings
HealthData$CheckIn <- as.character(HealthData$CheckIn)
HealthData$CheckOut <- as.character(HealthData$CheckOut)
HealthData$Admitted <- as.character(HealthData$Admitted)
?grep
grep('.* 00:.*', HealthData$Admitted)
grep('10-09-2016  00:47:00', HealthData$Admitted)
head(HealthData$Admitted)
grep('10/09/2016  00:47', HealthData$Admitted)
grep('10/09/2016  10:38', HealthData$Admitted)
grep("10/09/2016  10:38", HealthData$Admitted)
grep("10/09/2016  10:38", HealthData$Admitted)
grep("10/09/2016 10:38", HealthData$Admitted)
grep("10/9/2016 10:38", HealthData$Admitted)
grep(".* 10:38", HealthData$Admitted)
grep(".* 00:38", HealthData$Admitted)
grep(".* 12:38", HealthData$Admitted)
grep(".* 12:.*", HealthData$Admitted)
grep(".* 12:.*AM", HealthData$Admitted)
grep(".* 12:", HealthData$Admitted)
grep(".* 00:", HealthData$Admitted)
grep(".* 0:", HealthData$Admitted)
x <- list(a = 1:10, beta = exp(-3:3), logic = c(TRUE,FALSE,FALSE,TRUE))
x
x[[2]]
x[1][1]
x[1][2] <- 0
x[1][2] <- seq(10)
x[1][2]
x[1][2] <- seq(1, 10)
x[1][2]
x[1][2] <- seq(1, 20)
seq(1, 20)
x$a[2] <- seq(1, 10)
x$a
x$a[2] <- x[[1]]
x[[2]]
class(x$a)
class(x)
x$a[2] <- 1
x[1]
x <- list(a = matrix(1:20, ncol = 4), beta = exp(-3:3), logic = c(TRUE,FALSE,FALSE,TRUE))
x
x[[1]]
x[[1]][1,2]
x[[1]][2]
x[[1]][,2]
x[[1]][,2] <- 36:40
x[[1]]
lapply(x, mean)
?sample
sample(1:10, length.out = 100)
sample(rep(1:10), length.out = 100))
sample(rep(1:10), length.out = 100)
sample(rep(1:10, length.out = 100))
?rep
set.seed(2)
# Principal Components Analysis
states = row.names(USArrests)
states
names(USArrests)
# EDA
apply(USArrests, 2, mean)
apply(USArrests, 2, var)
# Perform PCA
pr.out <- prcomp(USArrests, scale. = TRUE)
names(pr.out)
# Used to scale prior to applying PCA
pr.out$center
pr.out$scale
# Loading vectors
pr.out$rotation
dim(pr.out$x)
biplot(pr.out, scale = 0)
# Rotate to get basically the same components
pr.out$rotation <- -pr.out$rotation
pr.out$x <- -pr.out$x
biplot(pr.out, scale = 0)
# Other info
pr.out$sdev
pr.var <- pr.out$sdev^2
pr.var
pve <- pr.var/sum(pr.var)
pve
# Scree plot
plot(pve, xlab = "Principal Component", ylab = "Proportion of Variance Explained",
ylim = c(0,1), type = 'b')
plot(cumsum(pve), xlab = "Principal Component",
ylab = "Cumulative Proportion of Variance Explained", ylim = c(0,1), type = 'b')
x <- matrix(rnorm(50*2), ncol=2)
x
?rnorm
x[1:25, 1] <- x[1:25, 1] + 3
x[1:25, 2] <- x[1:25, 2] - 4
x
km.out <- kmeans(x, 2, nstart = 20)
km.out$cluster
plot(x, col=(km.out$cluster + 1), main='K-Means Clustering Results with K=2',
xlab='', ylab='', pch=20, cex=2)
set.seed(4)
kmeans
?kmeans
km.out <- kmeans(x, 3, nstart=20)
km.out
plot(x, col=(km.out$cluster + 1), main='K-Means Clustering Results with K=3',
xlab='', ylab='', pch=20, cex=2)
set.seed(3)
km.out <- kmeans(x, 3, nstart=1)
km.out$tot.withinss
km.out <- kmeans(x, 3, nstart=20)
km.out$tot.withinss
?dist
?hclust
hc.complete <- hclust(dist(x), method = 'complete')
hc.average <- hclust(dist(x), method = 'average')
hc.single <- hclust(dist(x), method = 'single')
par(mfrow=c(1,3))
plot(hc.complete, main='Complete Linkage', xlab='', sub='', cex=.9)
plot(hc.average, main='Average Linkage', xlab='', sub='', cex=.9)
plot(hc.single, main='Single Linkage', xlab='', sub='', cex=.9)
par(mfrow=c(1,1))
cutree(hc.complete, 2)
cutree(hc.average, 2)
cutree(hc.single, 2)
cutree(hc.single, 4)
xsc = scale(x)
plot(hclust(dist(xsc), method='complete'), main='Hierarchical Clustering with Scaled Features')
x <- matrix(rnorm(30*3), ncol = 3)
dd <- as.dist(1 - cor(t(x)))
cor(t(x))
dd
plot(hclust(dd, method='complete'), main = 'Complete Linkage with Correlation-Based Distance',
xlab='', sub='')
setwd("C:/Users/deepf/Google Drive - NU/Courses/Spring Quarter 2017/Data Viz/Exercise-1-Data")
setwd("C:/Users/deepf/Google Drive - NU/Courses/Spring Quarter 2017/Data Viz/Exercise-1-Data/Exercise-1-Data")
unemployment_data <- read.csv('Unemployment.csv', header = TRUE)
View(unemployment_data)
head(unemployment_data,10)
nrow(unemployment_data)
udata <- data.frame(colnames = c('Year', 'Months', 'Unemployment'))
?paste
udata <- data.frame(colnames = c('Year', 'Months', 'Unemployment'))
for (i in unemployment_data[1,1]:unemployment_data[65,1]) {
for (j in 1:12) {
udata <- rbind(udata, c(unemployment_data[i,1], unemployment_data[i, paste0(c('X',j)]))
}
}
udata
?data.frame
udata <- data.frame(year = numeric(0), month = numeric(0), unemployment = numeric(0)))
udata <- data.frame(year = numeric(0), month = numeric(0), unemployment = numeric(0))
udata
for (i in unemployment_data[1,1]:unemployment_data[65,1]) {
for (j in 1:12) {
udata <- rbind(udata, c(unemployment_data[i,1], j,
unemployment_data[i, paste0(c('X',j)]))
}
}
udata
?range
for (i in 1:65) {
for (j in 1:12) {
udata <- rbind(udata, c(unemployment_data[i,1], j,
unemployment_data[i, paste0(c('X',j)]))
}
}
udata
for (i in 1:65) {
for (j in 1:12) {
udata <- rbind(udata, c(unemployment_data[i,1], j,
unemployment_data[i, paste0(c('X',j)])))
}
}
for (i in 1:65) {
for (j in 1:12) {
udata <- rbind(udata, c(unemployment_data[i,1], j,
unemployment_data[i, paste0(c('X',j))]))
}
}
paste0(c('X','j'))
?paste
paste('a', 'b')
paste('a', 'b', sep='')
paste0('a', 'b')
for (i in 1:65) {
for (j in 1:12) {
udata <- rbind(udata, c(unemployment_data[i,1], j,
unemployment_data[i, paste0('X',j)]))
}
}
udata
colnames(udata) <- c('Year', 'Month', 'Unemployment')
udata
write.csv('Unemployment_ts.csv')
write.csv(udata, 'Unemployment_ts.csv')
?write.csv
write.csv(udata, 'Unemployment_ts.csv', row.names = FALSE)
udata$P_Year <- 0
head(udata)
udata$SH_Year <- 0
head(udata)
udata$P_Year <- ifelse(udata$Year %% 4 == 2, 1, 0)
udata$SH_Year <- ifelse(udata$Year %% 2 == 0, 1, 0)
head(udata)
View(udata)
write.csv(udata, 'Unemployment_ts.csv', row.names = FALSE)
udata$P_Year <- ifelse(udata$Year %% 4 == 2, TRUE, FALSE)
udata$SH_Year <- ifelse(udata$Year %% 2 == 0, TRUE, FALSE)
head(udata)
write.csv(udata, 'Unemployment_ts.csv', row.names = FALSE)
employment_data <- read.csv('Employment.csv', header = TRUE)
View(employment_data)
udata <- data.frame(year = character(0), month = character(0), unemployment = numeric(0))
for (i in 1:65) {
for (j in 1:12) {
udata <- rbind(udata, c(unemployment_data[i,1], j,
unemployment_data[i, paste0('X',j)]))
}
}
udata
colnames(udata) <- c('Year', 'Month', 'Unemployment')
udata$P_Year <- ifelse(udata$Year %% 4 == 2, TRUE, FALSE)
udata$SH_Year <- ifelse(udata$Year %% 2 == 0, TRUE, FALSE)
for (i in 1:65) {
for (j in 1:12) {
udata <- rbind(udata, c(unemployment_data[i,1], j,
unemployment_data[i, paste0('X',j)], employment_data[i, paste0('X',j)],
unemployment_data[i, paste0('X',j)] / employment_data[i, paste0('X',j)]))
}
}
udata
colnames(udata) <- c('Year', 'Month', 'Unemployment', 'Employment', 'U/E Ratio')
udata
udata$P_Year <- ifelse(udata$Year %% 4 == 2, TRUE, FALSE)
udata$SH_Year <- ifelse(udata$Year %% 2 == 0, TRUE, FALSE)
udata
udata <- data.frame(year = character(0), month = character(0), unemployment = numeric(0),
employment = numeric(0), ratio = numeric(0))
udata
for (i in 1:65) {
for (j in 1:12) {
udata <- rbind(udata, c(unemployment_data[i,1], j,
unemployment_data[i, paste0('X',j)], employment_data[i, paste0('X',j)],
unemployment_data[i, paste0('X',j)] / employment_data[i, paste0('X',j)]))
}
}
colnames(udata) <- c('Year', 'Month', 'Unemployment', 'Employment', 'U/E Ratio')
udata$P_Year <- ifelse(udata$Year %% 4 == 2, TRUE, FALSE)
udata$SH_Year <- ifelse(udata$Year %% 2 == 0, TRUE, FALSE)
udata
write.csv(udata, 'Unemployment_ts.csv', row.names = FALSE)
